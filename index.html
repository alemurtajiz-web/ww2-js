<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Old Wars 1939-1945</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #fff;
            user-select: none;
        }
        canvas { display: block; }

        /* TITLE SCREEN */
        #titleScreen {
            position: fixed; inset: 0; z-index: 200;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            background: linear-gradient(180deg, #0a0a06 0%, #1a1810 50%, #2a2518 100%);
        }
        #titleScreen::before {
            content: '';
            position: absolute; inset: 0;
            background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.6) 100%);
        }
        #titleScreen > * { position: relative; z-index: 1; }
        .title-star { font-size: 40px; color: #d4a017; margin-bottom: 4px; }
        #titleScreen h1 {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 80px;
            color: #d4a017;
            text-shadow: 4px 4px 0 #000, 0 0 40px rgba(212,160,23,0.3);
            letter-spacing: 8px;
        }
        .title-sub {
            font-size: 20px; color: #aaa;
            letter-spacing: 6px; margin-bottom: 50px;
        }
        #titleScreen button {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 32px; padding: 16px 80px;
            background: linear-gradient(180deg, #c9940a, #7a5508);
            color: #fff; border: 2px solid #e0b020;
            border-radius: 4px; cursor: pointer;
            letter-spacing: 4px;
            text-shadow: 2px 2px 4px #000;
            transition: all 0.2s;
        }
        #titleScreen button:hover {
            background: linear-gradient(180deg, #e0b020, #c9940a);
            transform: scale(1.05);
        }
        .name-row {
            display: flex; gap: 8px; margin-bottom: 24px; align-items: center;
        }
        #soldierName {
            font-family: 'Courier New', monospace; font-size: 20px;
            padding: 10px 16px; width: 260px;
            background: #1a1810; color: #d4a017; border: 2px solid #7a5508;
            border-radius: 4px; outline: none; letter-spacing: 2px;
            text-align: center;
        }
        #soldierName::placeholder { color: #665520; }
        #soldierName:focus { border-color: #e0b020; }
        #randomNameBtn {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 16px; padding: 10px 16px;
            background: linear-gradient(180deg, #555, #333);
            color: #ccc; border: 2px solid #666;
            border-radius: 4px; cursor: pointer;
            letter-spacing: 1px;
            transition: all 0.2s;
        }
        #randomNameBtn:hover { background: linear-gradient(180deg, #666, #444); }
        #titleScreen button:disabled {
            opacity: 0.4; cursor: not-allowed;
            transform: none;
        }
        #titleScreen button:disabled:hover {
            background: linear-gradient(180deg, #c9940a, #7a5508);
            transform: none;
        }

        /* Map Select */
        #mapSelect {
            display: none;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 24px;
            justify-content: center;
            max-width: 820px;
            max-height: 45vh;
            overflow-y: auto;
            padding: 4px 8px;
        }
        #mapSelect::-webkit-scrollbar { width: 6px; }
        #mapSelect::-webkit-scrollbar-thumb { background: rgba(212,160,23,0.3); border-radius: 3px; }
        #mapSelect::-webkit-scrollbar-track { background: transparent; }
        .map-card {
            width: 148px;
            padding: 12px 10px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        .map-card:hover {
            border-color: #d4a017;
            background: rgba(212,160,23,0.1);
            transform: translateY(-3px);
        }
        .map-card.selected {
            border-color: #e0b020;
            background: rgba(212,160,23,0.2);
            box-shadow: 0 0 20px rgba(212,160,23,0.3);
        }
        .map-card-icon {
            font-size: 28px;
            margin-bottom: 4px;
        }
        .map-card-name {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 13px;
            color: #d4a017;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }
        .map-card-desc {
            font-size: 10px;
            color: #888;
            line-height: 1.3;
        }
        .map-card-level {
            font-family: 'Courier New', monospace;
            font-size: 9px;
            color: #888;
            letter-spacing: 1px;
            margin-bottom: 2px;
        }
        .map-card.locked {
            opacity: 0.35;
            pointer-events: none;
            filter: grayscale(1);
            position: relative;
        }
        .map-card.locked::after {
            content: '\1F512';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            opacity: 0.7;
        }

        .title-info {
            margin-top: 40px; color: #666;
            font-size: 14px; text-align: center; line-height: 2;
        }

        /* Multiplayer menu */
        #mpMenu {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        .mp-btn-row {
            display: flex; gap: 12px;
        }
        .mp-btn {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 22px; padding: 12px 32px;
            background: linear-gradient(180deg, #c9940a, #7a5508);
            color: #fff; border: 2px solid #e0b020;
            border-radius: 4px; cursor: pointer;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px #000;
            transition: all 0.2s;
        }
        .mp-btn:hover {
            background: linear-gradient(180deg, #e0b020, #c9940a);
            transform: scale(1.05);
        }
        .mp-btn.solo {
            background: linear-gradient(180deg, #555, #333);
            border-color: #666;
        }
        .mp-btn.solo:hover {
            background: linear-gradient(180deg, #666, #444);
        }
        #mpLobby {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }
        #mpLobby .room-code {
            font-family: 'Courier New', monospace;
            font-size: 48px;
            color: #d4a017;
            letter-spacing: 12px;
            text-shadow: 2px 2px 0 #000;
        }
        #mpLobby .waiting-text {
            font-size: 16px;
            color: #888;
            letter-spacing: 2px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        #mpLobby .partner-name {
            font-size: 18px;
            color: #4b8b3b;
            letter-spacing: 2px;
        }
        #joinInput {
            font-family: 'Courier New', monospace;
            font-size: 32px;
            padding: 10px 16px;
            width: 180px;
            background: #1a1810;
            color: #d4a017;
            border: 2px solid #7a5508;
            border-radius: 4px;
            outline: none;
            letter-spacing: 8px;
            text-align: center;
        }
        #joinInput::placeholder { color: #665520; letter-spacing: 4px; font-size: 16px; }
        #joinInput:focus { border-color: #e0b020; }
        #joinError {
            font-size: 14px;
            color: #e74c3c;
            min-height: 20px;
        }

        /* Partner HUD */
        #partnerHud {
            display: none;
            position: absolute;
            top: 50px; left: 20px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(75,139,59,0.3);
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 13px;
            color: #4b8b3b;
        }
        #partnerHud .partner-label {
            font-size: 11px;
            color: #5ea04a;
            letter-spacing: 1px;
            margin-bottom: 2px;
        }
        #partnerHud .partner-hp-outer {
            width: 140px; height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        #partnerHud .partner-hp-inner {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #2ecc71);
            border-radius: 4px;
            transition: width 0.3s;
        }
        #partnerHud .partner-score {
            font-size: 11px;
            color: #888;
            margin-top: 2px;
        }
        /* Partner down banner */
        #partnerDownBanner {
            position: fixed;
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: Impact, sans-serif;
            font-size: 48px;
            color: #e74c3c;
            text-shadow: 3px 3px 0 #000;
            z-index: 60;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s;
            letter-spacing: 4px;
        }

        /* CLICK TO PLAY overlay */
        #clickToPlay {
            position: fixed; inset: 0; z-index: 150;
            display: none;
            align-items: center; justify-content: center;
            background: rgba(0,0,0,0.7);
            cursor: pointer;
        }
        #clickToPlay span {
            font-family: Impact, sans-serif;
            font-size: 36px; color: #d4a017;
            letter-spacing: 4px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* HUD */
        #hud {
            position: fixed; inset: 0;
            pointer-events: none; z-index: 50;
            display: none;
        }

        /* Crosshair */
        #crosshair {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 24px; height: 24px;
        }
        #crosshair::before, #crosshair::after {
            content: ''; position: absolute;
            background: rgba(255,255,255,0.8);
        }
        #crosshair::before {
            width: 2px; height: 24px;
            left: 50%; transform: translateX(-50%);
        }
        #crosshair::after {
            width: 24px; height: 2px;
            top: 50%; transform: translateY(-50%);
        }
        .crosshair-dot {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 4px; height: 4px;
            background: rgba(255,50,50,0.9);
            border-radius: 50%;
        }

        /* Health + Ammo bar (bottom) */
        #bottomHud {
            position: absolute;
            bottom: 20px; left: 50%;
            transform: translateX(-50%);
            display: flex; gap: 40px;
            align-items: flex-end;
        }
        .hud-block {
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
            padding: 8px 16px;
            min-width: 160px;
        }
        .hud-block-label {
            font-size: 10px; color: #888;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 4px;
        }
        .health-bar-outer {
            width: 200px; height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px; overflow: hidden;
        }
        .health-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #2ecc71);
            border-radius: 5px;
            transition: width 0.3s;
        }
        .ammo-text {
            font-family: 'Courier New', monospace;
            font-size: 28px; font-weight: bold;
            color: #fff;
        }
        .ammo-text .ammo-max {
            font-size: 16px; color: #888;
        }
        .weapon-name {
            font-size: 11px; color: #d4a017;
            margin-top: 2px;
        }

        /* Top center - wave info */
        #topHud {
            position: absolute;
            top: 16px; left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        .wave-label {
            font-family: Impact, sans-serif;
            font-size: 16px; color: #d4a017;
            letter-spacing: 3px;
        }
        .enemy-count {
            font-size: 12px; color: #ccc;
        }

        /* Score (top right) */
        #scoreHud {
            position: absolute;
            top: 16px; right: 20px;
            text-align: right;
        }
        .score-val {
            font-family: Impact, sans-serif;
            font-size: 28px; color: #fff;
        }
        .kill-label {
            font-size: 11px; color: #888;
        }

        /* Wave banner */
        #waveBanner {
            position: fixed;
            top: 30%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: Impact, sans-serif;
            font-size: 72px; color: #d4a017;
            text-shadow: 4px 4px 0 #000, 0 0 60px rgba(212,160,23,0.4);
            z-index: 60;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s;
            letter-spacing: 6px;
        }

        /* Hit marker */
        #hitMarker {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 20px; height: 20px;
            opacity: 0;
            z-index: 55;
            pointer-events: none;
            transition: opacity 0.1s;
        }
        .hm-line {
            position: absolute;
            background: #fff;
        }
        .hm-line:nth-child(1) { width: 8px; height: 2px; top: 2px; left: 2px; transform: rotate(45deg); }
        .hm-line:nth-child(2) { width: 8px; height: 2px; top: 2px; right: 2px; transform: rotate(-45deg); }
        .hm-line:nth-child(3) { width: 8px; height: 2px; bottom: 2px; left: 2px; transform: rotate(-45deg); }
        .hm-line:nth-child(4) { width: 8px; height: 2px; bottom: 2px; right: 2px; transform: rotate(45deg); }

        /* Damage vignette */
        #damageVignette {
            position: fixed; inset: 0;
            pointer-events: none; z-index: 45;
            opacity: 0;
            transition: opacity 0.15s;
            background: radial-gradient(ellipse at center, transparent 50%, rgba(255,0,0,0.4) 100%);
        }

        /* Reload bar */
        #reloadBar {
            position: absolute;
            bottom: 90px; left: 50%;
            transform: translateX(-50%);
            width: 160px; height: 6px;
            background: rgba(255,255,255,0.15);
            border-radius: 3px;
            overflow: hidden;
            display: none;
        }
        #reloadBarFill {
            height: 100%;
            background: #d4a017;
            border-radius: 3px;
            width: 0%;
            transition: width 0.05s linear;
        }
        #reloadText {
            position: absolute;
            bottom: 100px; left: 50%;
            transform: translateX(-50%);
            font-size: 12px; color: #d4a017;
            letter-spacing: 2px;
            display: none;
        }

        /* Game Over */
        #gameOver {
            position: fixed; inset: 0; z-index: 180;
            display: none;
            flex-direction: column;
            align-items: center; justify-content: center;
            background: rgba(0,0,0,0.85);
        }
        #gameOver h1 {
            font-family: Impact, sans-serif;
            font-size: 72px; color: #e74c3c;
            text-shadow: 4px 4px 0 #000;
            margin-bottom: 10px;
        }
        #gameOver .stats {
            font-size: 24px; color: #d4a017;
            margin-bottom: 10px;
        }
        #gameOver .stats2 {
            font-size: 16px; color: #aaa;
            margin-bottom: 40px;
        }
        #gameOver button {
            font-family: Impact, sans-serif;
            font-size: 28px; padding: 14px 60px;
            background: linear-gradient(180deg, #c9940a, #7a5508);
            color: #fff; border: 2px solid #e0b020;
            border-radius: 4px; cursor: pointer;
            letter-spacing: 3px;
        }
        #gameOver button:hover {
            background: linear-gradient(180deg, #e0b020, #c9940a);
        }

        /* Win Screen */
        #winScreen {
            position: fixed; inset: 0; z-index: 180;
            display: none;
            flex-direction: column;
            align-items: center; justify-content: center;
            background: rgba(0,0,0,0.85);
        }
        #winScreen h1 {
            font-family: Impact, sans-serif;
            font-size: 80px; color: #2ecc71;
            text-shadow: 4px 4px 0 #000;
            margin-bottom: 10px;
        }
        #winScreen .stats {
            font-size: 24px; color: #d4a017;
            margin-bottom: 10px;
        }
        #winScreen .stats2 {
            font-size: 16px; color: #aaa;
            margin-bottom: 40px;
        }
        #winScreen button {
            font-family: Impact, sans-serif;
            font-size: 28px; padding: 14px 60px;
            background: linear-gradient(180deg, #27ae60, #1a7a42);
            color: #fff; border: 2px solid #2ecc71;
            border-radius: 4px; cursor: pointer;
            letter-spacing: 3px;
        }
        #winScreen button:hover {
            background: linear-gradient(180deg, #2ecc71, #27ae60);
        }
        #nextMissionBtn {
            background: linear-gradient(180deg, #c9940a, #7a5508);
            border-color: #e0b020;
        }
        #nextMissionBtn:hover {
            background: linear-gradient(180deg, #e0b020, #c9940a);
        }

        /* Scope overlay */
        #scopeOverlay {
            position: fixed; inset: 0;
            display: none; z-index: 52;
            pointer-events: none;
            background: radial-gradient(circle at center,
                transparent 18%,
                rgba(0,0,0,0.15) 18.5%,
                rgba(0,0,0,0.15) 22%,
                #000 22.5%
            );
        }
        .scope-ring {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 38vmin; height: 38vmin;
            border: 2px solid rgba(0,0,0,0.6);
            border-radius: 50%;
        }
        .scope-crossV {
            position: absolute;
            top: 0; bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            background: rgba(0,0,0,0.7);
        }
        .scope-crossH {
            position: absolute;
            left: 0; right: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 1px;
            background: rgba(0,0,0,0.7);
        }
        .scope-mil {
            position: absolute;
            left: 50%; transform: translateX(-50%);
            width: 12px; height: 1px;
            background: rgba(0,0,0,0.5);
        }
        .scope-mil-1 { top: calc(50% + 30px); }
        .scope-mil-2 { top: calc(50% + 60px); }
        .scope-mil-3 { top: calc(50% + 90px); }

        /* Weapon view model hint */
        #weaponHint {
            position: absolute;
            bottom: 70px; left: 50%;
            transform: translateX(-50%);
            font-size: 10px; color: #555;
            letter-spacing: 1px;
        }

        /* COD-style blood screen (low health) */
        #bloodScreen {
            position: fixed; inset: 0;
            pointer-events: none; z-index: 44;
            opacity: 0;
            transition: opacity 0.3s;
            background:
                radial-gradient(ellipse at center, transparent 30%, rgba(120,0,0,0.5) 100%),
                radial-gradient(ellipse at 20% 20%, rgba(80,0,0,0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(80,0,0,0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(60,0,0,0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 20% 80%, rgba(60,0,0,0.2) 0%, transparent 50%);
        }

        /* Kill feed (top-right, COD style) */
        #killFeed {
            position: absolute;
            top: 80px; right: 20px;
            display: flex; flex-direction: column;
            gap: 4px; pointer-events: none;
            z-index: 55;
        }
        .kill-entry {
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 13px;
            color: #fff;
            background: rgba(0,0,0,0.5);
            padding: 4px 10px;
            border-left: 3px solid #d4a017;
            border-radius: 2px;
            animation: killFadeIn 0.2s ease-out, killFadeOut 0.5s ease-in 2.5s forwards;
            white-space: nowrap;
        }
        .kill-entry .kill-weapon { color: #888; font-size: 11px; }
        .kill-entry .kill-score { color: #d4a017; font-weight: bold; margin-left: 6px; }
        @keyframes killFadeIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes killFadeOut { from { opacity: 1; } to { opacity: 0; } }

        /* Grenade indicator */
        #grenadeHud {
            position: absolute;
            bottom: 25px; right: 20px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 12px; color: #ccc;
        }
        #grenadeHud .grenade-icon {
            display: inline-block;
            width: 12px; height: 18px;
            background: #6a6a4a;
            border-radius: 2px 2px 4px 4px;
            margin-right: 4px;
            vertical-align: middle;
        }
        #grenadeHud .grenade-count {
            font-family: 'Courier New', monospace;
            font-size: 18px; font-weight: bold;
            color: #fff;
        }

        /* Headshot indicator */
        #headshotText {
            position: fixed;
            top: 40%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: Impact, sans-serif;
            font-size: 28px; color: #ff4444;
            text-shadow: 2px 2px 0 #000;
            z-index: 56; opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            letter-spacing: 3px;
        }

        /* Compass */
        #compass {
            position: absolute;
            top: 8px; left: 50%;
            transform: translateX(-50%);
            width: 300px; height: 20px;
            overflow: hidden;
            background: rgba(0,0,0,0.4);
            border-radius: 2px;
            font-size: 10px;
            color: rgba(255,255,255,0.6);
            text-align: center;
            line-height: 20px;
            letter-spacing: 2px;
        }
        #compassInner {
            position: absolute;
            white-space: nowrap;
            transition: transform 0.1s linear;
        }
        #compass .compass-mark {
            display: inline-block;
            width: 40px; text-align: center;
        }
        #compass .compass-cardinal { color: #d4a017; font-weight: bold; }

        /* Ally HUD */
        #allyHud {
            position: absolute;
            top: 16px; left: 20px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(75,139,59,0.3);
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 13px;
            color: #4b8b3b;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        #allyHud .ally-icon {
            font-size: 14px;
            margin-right: 4px;
        }
        #allyHud .ally-count {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            color: #5ea04a;
        }

        /* ---- TOUCH CONTROLS ---- */
        #touchControls {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 100;
            pointer-events: none;
        }
        #touchControls > * {
            position: fixed;
            z-index: 1000;
            pointer-events: auto;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-weight: bold;
            color: rgba(255,255,255,0.85);
            text-shadow: 1px 1px 2px #000;
        }

        /* Move stick */
        #moveStick {
            width: 120px; height: 120px;
            left: 20px; bottom: 20px;
            background: rgba(255,255,255,0.08);
            border: 2px solid rgba(255,255,255,0.2);
        }
        #moveStickKnob {
            width: 50px; height: 50px;
            background: rgba(255,255,255,0.25);
            border: 2px solid rgba(255,255,255,0.4);
            border-radius: 50%;
            position: absolute;
            pointer-events: none;
            transition: none;
        }
        #moveStick.active {
            border-color: rgba(255,255,255,0.45);
        }

        /* Shoot button */
        #shootBtn {
            width: 70px; height: 70px;
            right: 20px; bottom: 80px;
            background: rgba(220,40,40,0.45);
            border: 2px solid rgba(255,80,80,0.6);
            font-size: 11px;
            letter-spacing: 1px;
        }
        #shootBtn:active, #shootBtn.active {
            background: rgba(255,50,50,0.7);
        }

        /* ADS button */
        #adsBtn {
            width: 50px; height: 50px;
            left: 20px; bottom: 220px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.25);
            font-size: 10px;
        }
        #adsBtn:active, #adsBtn.active {
            background: rgba(255,255,255,0.3);
        }

        /* Reload button */
        #reloadBtn {
            width: 50px; height: 50px;
            right: 100px; bottom: 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.25);
            font-size: 9px;
            letter-spacing: 1px;
        }

        /* Jump button */
        #jumpBtn {
            width: 50px; height: 50px;
            right: 180px; bottom: 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.25);
            font-size: 10px;
        }

        /* Sprint button */
        #sprintBtn {
            width: 50px; height: 50px;
            left: 150px; bottom: 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.25);
            font-size: 9px;
            letter-spacing: 1px;
        }
        #sprintBtn.active {
            background: rgba(255,200,50,0.3);
            border-color: rgba(255,200,50,0.5);
        }

        /* Grenade button */
        #grenadeBtn {
            width: 50px; height: 50px;
            right: 20px; bottom: 200px;
            background: rgba(255,180,40,0.15);
            border: 2px solid rgba(255,180,40,0.35);
            font-size: 10px;
        }

        /* Weapon buttons */
        #weaponBtns {
            position: fixed;
            right: 20px; bottom: 280px;
            z-index: 1000;
            pointer-events: auto;
            touch-action: none;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .weapon-btn {
            width: 40px; height: 40px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            color: rgba(255,255,255,0.8);
            text-shadow: 1px 1px 2px #000;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }
        .weapon-btn.active {
            background: rgba(212,160,23,0.35);
            border-color: rgba(212,160,23,0.6);
        }

        /* Look area (invisible, covers right half) */
        #lookArea {
            position: fixed;
            top: 0;
            right: 0;
            width: 50%;
            height: 100%;
            z-index: 999;
            pointer-events: auto;
            touch-action: none;
            border-radius: 0;
        }

        /* Touch-specific overrides */
        .touch-device #clickToPlay { display: none !important; }
        .touch-device #weaponHint { display: none !important; }
        .touch-device .hud-block-label { font-size: 11px; }
        .touch-device .ammo-text { font-size: 30px; }
        .touch-device .score-val { font-size: 30px; }

        /* Flight HUD */
        #flightHud {
            display: none;
            position: fixed;
            bottom: 30px; left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            border: 1px solid rgba(100,200,100,0.3);
            border-radius: 6px;
            padding: 10px 24px;
            font-family: 'Courier New', monospace;
            color: #88ff88;
            font-size: 14px;
            z-index: 60;
            text-align: center;
            letter-spacing: 1px;
        }
        #flightHud .flight-row {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
        }
        #flightHud .flight-label { color: #6a6; font-size: 10px; text-transform: uppercase; }
        #flightHud .flight-val { font-size: 22px; font-weight: bold; }
        #flightHud .flight-bombs { color: #ffaa44; }
        #flightHpBar {
            width: 200px; height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-top: 6px;
            overflow: hidden;
        }
        #flightHpFill {
            height: 100%;
            background: #88ff88;
            border-radius: 3px;
            transition: width 0.2s;
        }

        /* Plane prompt */
        #planePrompt {
            display: none;
            position: fixed;
            bottom: 180px; left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            border: 1px solid rgba(212,160,23,0.4);
            border-radius: 4px;
            padding: 8px 20px;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 14px;
            color: #d4a017;
            z-index: 58;
            letter-spacing: 1px;
        }

        /* Tank prompt */
        #tankPrompt {
            display: none;
            position: fixed;
            bottom: 220px; left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            border: 1px solid rgba(100,200,100,0.5);
            border-radius: 4px;
            padding: 10px 24px;
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 18px;
            color: #6abf6a;
            z-index: 59;
            letter-spacing: 2px;
            text-shadow: 1px 1px 3px #000;
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* Tank HUD */
        #tankHud {
            display: none;
            position: fixed;
            bottom: 30px; left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            border: 1px solid rgba(100,180,100,0.3);
            border-radius: 6px;
            padding: 10px 24px;
            font-family: 'Courier New', monospace;
            color: #88ff88;
            font-size: 14px;
            z-index: 60;
            text-align: center;
            letter-spacing: 1px;
        }
        #tankHud .tank-row {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
        }
        #tankHud .tank-label { color: #6a6; font-size: 10px; text-transform: uppercase; }
        #tankHud .tank-val { font-size: 22px; font-weight: bold; }
        #tankHpBar {
            width: 200px; height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-top: 6px;
            overflow: hidden;
        }
        #tankHpFill {
            height: 100%;
            background: #88ff88;
            border-radius: 3px;
            transition: width 0.2s;
        }

        /* Tank scope overlay (viewport slit effect) */
        #tankScope {
            display: none;
            position: fixed; inset: 0;
            z-index: 52;
            pointer-events: none;
        }
        #tankScope .slit-top {
            position: absolute; top: 0; left: 0; right: 0;
            height: 8%;
            background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%);
        }
        #tankScope .slit-bottom {
            position: absolute; bottom: 0; left: 0; right: 0;
            height: 12%;
            background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, transparent 100%);
        }
        #tankScope .slit-vignette {
            position: absolute; inset: 0;
            background: radial-gradient(ellipse at center, transparent 55%, rgba(0,0,0,0.35) 85%, rgba(0,0,0,0.7) 100%);
        }
        #tankScope .slit-frame-top, #tankScope .slit-frame-bottom {
            position: absolute; left: 3%; right: 3%;
            height: 2px;
            background: rgba(80,80,60,0.4);
        }
        #tankScope .slit-frame-top { top: 8%; }
        #tankScope .slit-frame-bottom { bottom: 12%; }
        #tankScope .tank-reticle {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 2px; height: 40px;
            background: rgba(255,100,50,0.5);
        }
        #tankScope .tank-reticle-h {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 40px; height: 2px;
            background: rgba(255,100,50,0.5);
        }

        /* Tank 3rd person crosshair */
        #tankCrosshair {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 55;
            pointer-events: none;
        }
        #tankCrosshair .tc-v {
            position: absolute;
            top: -20px; left: 50%;
            transform: translateX(-50%);
            width: 2px; height: 40px;
            background: rgba(255,80,40,0.7);
        }
        #tankCrosshair .tc-h {
            position: absolute;
            top: 50%; left: -20px;
            transform: translateY(-50%);
            width: 40px; height: 2px;
            background: rgba(255,80,40,0.7);
        }
        #tankCrosshair .tc-dot {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 6px; height: 6px;
            background: rgba(255,60,30,0.9);
            border-radius: 50%;
        }
        #tankCrosshair .tc-ring {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 30px; height: 30px;
            border: 1px solid rgba(255,80,40,0.4);
            border-radius: 50%;
        }

        /* ---- CUTSCENE OVERLAY ---- */
        #cutsceneOverlay {
            position: fixed; inset: 0; z-index: 170;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: auto;
            cursor: pointer;
        }
        #cutsceneOverlay .letterbox-top,
        #cutsceneOverlay .letterbox-bottom {
            position: absolute;
            left: 0; right: 0;
            height: 12%;
            background: #000;
            z-index: 2;
        }
        #cutsceneOverlay .letterbox-top { top: 0; }
        #cutsceneOverlay .letterbox-bottom { bottom: 0; }
        #cutsceneOverlay .cutscene-gradient {
            position: absolute; inset: 0;
            background: linear-gradient(180deg,
                rgba(0,0,0,0.6) 0%,
                rgba(0,0,0,0.1) 30%,
                rgba(0,0,0,0.1) 60%,
                rgba(0,0,0,0.7) 100%
            );
            z-index: 1;
        }
        #cutsceneOverlay .cutscene-content {
            position: relative;
            z-index: 3;
            text-align: center;
            width: 100%;
            padding: 0 40px;
        }
        .cutscene-title {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 64px;
            color: #d4a017;
            text-shadow: 3px 3px 0 #000, 0 0 40px rgba(212,160,23,0.4);
            letter-spacing: 8px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .cutscene-title.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .cutscene-subtitle {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            color: #ccc;
            letter-spacing: 4px;
            margin-top: 8px;
            opacity: 0;
            transform: translateY(15px);
            transition: opacity 0.8s ease-out 0.4s, transform 0.8s ease-out 0.4s;
        }
        .cutscene-subtitle.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .cutscene-theater {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #888;
            letter-spacing: 3px;
            margin-top: 4px;
            opacity: 0;
            transition: opacity 0.8s ease-out 0.7s;
        }
        .cutscene-theater.visible {
            opacity: 1;
        }
        .cutscene-briefing {
            position: absolute;
            bottom: 16%;
            left: 50%;
            transform: translateX(-50%);
            width: 70%;
            max-width: 700px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: #ddd;
            text-align: center;
            line-height: 1.6;
            letter-spacing: 1px;
            z-index: 3;
            opacity: 0;
            transition: opacity 0.5s ease-out 1.2s;
            border-left: 3px solid rgba(212,160,23,0.5);
            padding-left: 16px;
            text-align: left;
        }
        .cutscene-briefing.visible {
            opacity: 1;
        }
        .cutscene-skip {
            position: absolute;
            bottom: 4%;
            right: 5%;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: rgba(255,255,255,0.5);
            letter-spacing: 2px;
            z-index: 3;
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* ---- BERLIN ENDING CINEMATIC ---- */
        #berlinEndOverlay {
            position: fixed; inset: 0; z-index: 190;
            display: none;
            pointer-events: none;
        }
        #berlinFadeBlack {
            position: absolute; inset: 0;
            background: #000;
            opacity: 0;
            transition: opacity 3s ease-in;
        }
        #berlinFadeBlack.active { opacity: 1; }
        #berlinAnnouncement {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Courier New', monospace;
            font-size: 28px;
            color: #fff;
            text-align: center;
            letter-spacing: 3px;
            text-shadow: 2px 2px 8px #000;
            opacity: 0;
            transition: opacity 1s ease-in;
            width: 80%;
            z-index: 5;
        }
        #berlinAnnouncement.visible { opacity: 1; }
        #berlinHurra {
            position: absolute;
            top: 55%;
            left: 50%;
            transform: translateX(-50%);
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 52px;
            color: #d4a017;
            text-shadow: 3px 3px 0 #000, 0 0 30px rgba(212,160,23,0.5);
            letter-spacing: 8px;
            opacity: 0;
            transition: opacity 1s ease-in;
            z-index: 5;
        }
        #berlinHurra.visible { opacity: 1; }
        #berlinFinalTitle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0;
            transition: opacity 2s ease-in;
            z-index: 10;
        }
        #berlinFinalTitle.visible { opacity: 1; }
        #berlinFinalTitle h1 {
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 80px;
            color: #fff;
            letter-spacing: 10px;
            text-shadow: none;
            margin-bottom: 10px;
        }
        #berlinFinalTitle .final-years {
            font-family: 'Courier New', monospace;
            font-size: 32px;
            color: #aaa;
            letter-spacing: 8px;
        }
        #berlinFinalBtn {
            display: none;
            position: absolute;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
            font-family: Impact, 'Arial Black', sans-serif;
            font-size: 24px;
            padding: 14px 50px;
            background: linear-gradient(180deg, #555, #333);
            color: #fff;
            border: 2px solid #666;
            border-radius: 4px;
            cursor: pointer;
            letter-spacing: 3px;
            pointer-events: auto;
            z-index: 11;
        }
        #berlinFinalBtn:hover {
            background: linear-gradient(180deg, #666, #444);
        }
    </style>
</head>
<body>

<!-- Title Screen -->
<div id="titleScreen">
    <div class="title-star">&#9733;</div>
    <h1>OLD WARS</h1>
    <div class="title-sub">1939-1945</div>
    <div class="name-row">
        <input type="text" id="soldierName" placeholder="ENTER CALLSIGN" maxlength="20" autocomplete="off">
        <button id="randomNameBtn">RANDOM</button>
    </div>
    <button id="startBtn" disabled style="display:none">DEPLOY</button>

    <!-- Map Selection -->
    <div id="mapSelect">
        <div class="map-card" data-map="normandy">
            <div class="map-card-icon">&#9968;</div>
            <div class="map-card-name">NORMANDY BEACH</div>
            <div class="map-card-desc">Sandy shores, bunkers, beach obstacles, landing craft wreckage</div>
        </div>
        <div class="map-card" data-map="dunkirk">
            <div class="map-card-icon">&#128674;</div>
            <div class="map-card-name">DUNKIRK</div>
            <div class="map-card-desc">Beach evacuation, wide sand, wreckage, overcast, smoke</div>
        </div>
        <div class="map-card" data-map="elalamein">
            <div class="map-card-icon">&#9728;</div>
            <div class="map-card-name">EL ALAMEIN</div>
            <div class="map-card-desc">North Africa desert, sand dunes, hot sun, sparse cover</div>
        </div>
        <div class="map-card" data-map="tobruk">
            <div class="map-card-icon">&#127965;</div>
            <div class="map-card-name">TOBRUK</div>
            <div class="map-card-desc">Desert fortress, sandbag walls, bunkers, scorching heat</div>
        </div>
        <div class="map-card" data-map="montecassino">
            <div class="map-card-icon">&#9962;</div>
            <div class="map-card-name">MONTE CASSINO</div>
            <div class="map-card-desc">Hilltop monastery ruins, rocky terrain, rain, rubble</div>
        </div>
        <div class="map-card" data-map="guadalcanal">
            <div class="map-card-icon">&#127796;</div>
            <div class="map-card-name">GUADALCANAL</div>
            <div class="map-card-desc">Tropical jungle, dense trees, rain, humid fog, muddy</div>
        </div>
        <div class="map-card" data-map="midway">
            <div class="map-card-icon">&#9992;</div>
            <div class="map-card-name">MIDWAY</div>
            <div class="map-card-desc">Island airfield, flat sand, bunkers, ocean fog, planes</div>
        </div>
        <div class="map-card" data-map="iwojima">
            <div class="map-card-icon">&#127755;</div>
            <div class="map-card-name">IWO JIMA</div>
            <div class="map-card-desc">Volcanic black sand, bunkers, trenches, overcast Pacific</div>
        </div>
        <div class="map-card" data-map="okinawa">
            <div class="map-card-icon">&#127754;</div>
            <div class="map-card-name">OKINAWA</div>
            <div class="map-card-desc">Pacific island, cliffs, bunkers, rain, tropical green</div>
        </div>
        <div class="map-card" data-map="kursk">
            <div class="map-card-icon">&#9876;</div>
            <div class="map-card-name">KURSK</div>
            <div class="map-card-desc">Open steppe fields, tank country, wide views, summer heat</div>
        </div>
        <div class="map-card" data-map="stalingrad">
            <div class="map-card-icon">&#127959;</div>
            <div class="map-card-name">STALINGRAD RUINS</div>
            <div class="map-card-desc">Dense urban rubble, burning buildings, heavy smoke, rain</div>
        </div>
        <div class="map-card" data-map="leningrad">
            <div class="map-card-icon">&#127962;</div>
            <div class="map-card-name">LENINGRAD</div>
            <div class="map-card-desc">Frozen city siege, snow, ruins, dark skies, bitter cold</div>
        </div>
        <div class="map-card" data-map="sevastopol">
            <div class="map-card-icon">&#9875;</div>
            <div class="map-card-name">SEVASTOPOL</div>
            <div class="map-card-desc">Coastal fortress siege, bunkers, ruins, sea fog, rain</div>
        </div>
        <div class="map-card" data-map="bastogne">
            <div class="map-card-icon">&#10052;</div>
            <div class="map-card-name">BASTOGNE</div>
            <div class="map-card-desc">Frozen town, snow, buildings, cold fog, dense siege</div>
        </div>
        <div class="map-card" data-map="ardennes">
            <div class="map-card-icon">&#127794;</div>
            <div class="map-card-name">ARDENNES FOREST</div>
            <div class="map-card-desc">Pine forests, snow, rock cover, cold fog, fallen logs</div>
        </div>
        <div class="map-card" data-map="hurtgen">
            <div class="map-card-icon">&#127811;</div>
            <div class="map-card-name">HURTGEN FOREST</div>
            <div class="map-card-desc">Dense dark forest, mud, fallen trees, rain, fog</div>
        </div>
        <div class="map-card" data-map="caen">
            <div class="map-card-icon">&#127984;</div>
            <div class="map-card-name">CAEN</div>
            <div class="map-card-desc">French town, buildings, streets, hedgerows, overcast</div>
        </div>
        <div class="map-card" data-map="rhine">
            <div class="map-card-icon">&#127749;</div>
            <div class="map-card-name">RHINE CROSSING</div>
            <div class="map-card-desc">River bridge assault, open field, light cover, overcast</div>
        </div>
        <div class="map-card" data-map="warsaw">
            <div class="map-card-icon">&#128293;</div>
            <div class="map-card-name">WARSAW</div>
            <div class="map-card-desc">Urban uprising, dense ruins, heavy fires, smoke, rain</div>
        </div>
        <div class="map-card" data-map="berlin">
            <div class="map-card-icon">&#127960;</div>
            <div class="map-card-name">BERLIN</div>
            <div class="map-card-desc">Final battle, dense ruins, fires everywhere, dark smoke</div>
        </div>
    </div>

    <!-- Multiplayer Menu (appears after map select) -->
    <div id="mpMenu">
        <div class="mp-btn-row">
            <button class="mp-btn" id="hostBtn">HOST GAME</button>
            <button class="mp-btn" id="joinBtn">JOIN GAME</button>
        </div>
        <button class="mp-btn solo" id="soloBtn">SOLO</button>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="mpLobby">
        <div id="lobbyTitle" style="font-size:16px;color:#888;letter-spacing:2px;"></div>
        <div class="room-code" id="roomCodeDisplay"></div>
        <div class="waiting-text" id="lobbyWaiting">WAITING FOR PARTNER...</div>
        <div class="partner-name" id="lobbyPartner"></div>
        <input type="text" id="joinInput" placeholder="CODE" maxlength="4" autocomplete="off" style="display:none">
        <button class="mp-btn" id="joinConfirmBtn" style="display:none;font-size:18px;padding:8px 24px;">JOIN</button>
        <div id="joinError"></div>
        <button class="mp-btn" id="lobbyStartBtn" style="display:none;font-size:18px;padding:8px 24px;">START GAME</button>
        <button class="mp-btn solo" id="lobbyBackBtn" style="font-size:14px;padding:6px 16px;">BACK</button>
    </div>

    <div class="title-info">
        WASD - Move | Mouse - Aim | SPACE/Click - Shoot | R - Reload<br>
        1/2/3/4 - Weapons | Right-Click - Scope/Zoom | SHIFT - Sprint | V - Jump<br>
        G - Grenade | F - Fly Plane / Enter Tank | Health regenerates after 4 seconds
    </div>
</div>

<!-- Click to play (pointer lock) -->
<div id="clickToPlay">
    <span>CLICK TO RESUME</span>
</div>

<!-- HUD -->
<div id="hud">
    <div id="crosshair"><div class="crosshair-dot"></div></div>

    <div id="topHud">
        <div class="wave-label">WAVE <span id="waveNum">1</span></div>
        <div class="enemy-count">Enemies: <span id="enemyCount">0</span></div>
    </div>

    <div id="scoreHud">
        <div class="score-val" id="scoreText">0</div>
        <div class="kill-label">KILLS: <span id="killCount">0</span></div>
    </div>

    <div id="bottomHud">
        <div class="hud-block">
            <div class="hud-block-label">Health</div>
            <div class="health-bar-outer">
                <div class="health-bar-inner" id="healthBar" style="width:100%"></div>
            </div>
            <div style="font-size:12px;color:#ccc;margin-top:2px">
                <span id="healthText">100</span> / 100
            </div>
        </div>
        <div class="hud-block" style="text-align:center">
            <div class="hud-block-label">Ammo</div>
            <div class="ammo-text">
                <span id="ammoText">30</span><span class="ammo-max"> / <span id="ammoMax">30</span></span>
            </div>
            <div class="weapon-name" id="weaponName">M1 Garand</div>
        </div>
    </div>

    <div id="reloadText">RELOADING</div>
    <div id="reloadBar"><div id="reloadBarFill"></div></div>
    <div id="weaponHint">[1] M1 Garand &nbsp; [2] Thompson &nbsp; [3] Trench Gun &nbsp; [4] Springfield &nbsp; [5] Bazooka</div>

    <!-- Ally HUD -->
    <div id="allyHud">
        <span class="ally-icon">&#9733;</span> ALLIES: <span class="ally-count" id="allyCount">0</span>
    </div>

    <!-- Partner HUD (multiplayer) -->
    <div id="partnerHud">
        <div class="partner-label" id="partnerNameHud">PARTNER</div>
        <div class="partner-hp-outer">
            <div class="partner-hp-inner" id="partnerHpBar" style="width:100%"></div>
        </div>
        <div class="partner-score">Kills: <span id="partnerKills">0</span></div>
    </div>

    <!-- Kill feed -->
    <div id="killFeed"></div>

    <!-- Grenade HUD -->
    <div id="grenadeHud">
        <span class="grenade-icon"></span>
        <span class="grenade-count" id="grenadeCount">3</span>
    </div>

    <!-- Compass -->
    <div id="compass">
        <div id="compassInner"></div>
    </div>
</div>

<!-- Hit marker -->
<div id="hitMarker">
    <div class="hm-line"></div><div class="hm-line"></div>
    <div class="hm-line"></div><div class="hm-line"></div>
</div>

<!-- Scope Overlay -->
<div id="scopeOverlay">
    <div class="scope-ring"></div>
    <div class="scope-crossV"></div>
    <div class="scope-crossH"></div>
    <div class="scope-mil scope-mil-1"></div>
    <div class="scope-mil scope-mil-2"></div>
    <div class="scope-mil scope-mil-3"></div>
</div>

<div id="bloodScreen"></div>
<div id="damageVignette"></div>
<div id="headshotText">HEADSHOT</div>
<div id="waveBanner"></div>
<div id="partnerDownBanner">PARTNER DOWN</div>

<!-- Tank prompt -->
<div id="tankPrompt">PRESS F TO ENTER TANK &#9733;</div>

<!-- Plane prompt -->
<div id="planePrompt">PRESS F TO FLY LUFTWAFFE</div>

<!-- Tank 3rd person crosshair -->
<div id="tankCrosshair">
    <div class="tc-v"></div>
    <div class="tc-h"></div>
    <div class="tc-dot"></div>
    <div class="tc-ring"></div>
</div>

<!-- Tank HUD -->
<div id="tankHud">
    <div class="tank-row">
        <div><div class="tank-label">HP</div><div class="tank-val" id="tankHpText">350</div></div>
        <div><div class="tank-label">CANNON</div><div class="tank-val" id="tankCannon">READY</div></div>
        <div><div class="tank-label">SPD</div><div class="tank-val" id="tankSpd">0</div></div>
    </div>
    <div id="tankHpBar"><div id="tankHpFill" style="width:100%"></div></div>
    <div style="font-size:10px;color:#666;margin-top:4px">W/S DRIVE | A/D TURN | MOUSE AIM | SPACE FIRE | F EXIT | C CAMERA</div>
</div>

<!-- Tank scope overlay -->
<div id="tankScope">
    <div class="slit-top"></div>
    <div class="slit-bottom"></div>
    <div class="slit-vignette"></div>
    <div class="slit-frame-top"></div>
    <div class="slit-frame-bottom"></div>
    <div class="tank-reticle"></div>
    <div class="tank-reticle-h"></div>
</div>

<!-- Flight HUD -->
<div id="flightHud">
    <div class="flight-row">
        <div><div class="flight-label">ALT</div><div class="flight-val" id="flightAlt">0</div></div>
        <div><div class="flight-label">SPD</div><div class="flight-val" id="flightSpd">0</div></div>
        <div><div class="flight-label">BOMBS</div><div class="flight-val flight-bombs" id="flightBombs">5</div></div>
    </div>
    <div id="flightHpBar"><div id="flightHpFill" style="width:100%"></div></div>
    <div style="font-size:10px;color:#666;margin-top:4px">W/S PITCH | A/D ROLL | SPACE BOMB | F EXIT | C CAMERA</div>
</div>

<!-- Berlin Ending Cinematic -->
<div id="berlinEndOverlay">
    <div id="berlinAnnouncement">THE GERMANS HAVE LOST THE WAR!</div>
    <div id="berlinHurra">HURRA!</div>
    <div id="berlinFadeBlack"></div>
    <div id="berlinFinalTitle">
        <h1>OLD WARS</h1>
        <div class="final-years">1939  1945</div>
    </div>
    <button id="berlinFinalBtn">BACK TO LOBBY</button>
</div>

<!-- Cutscene Overlay -->
<div id="cutsceneOverlay">
    <div class="letterbox-top"></div>
    <div class="letterbox-bottom"></div>
    <div class="cutscene-gradient"></div>
    <div class="cutscene-content">
        <div class="cutscene-title" id="cutsceneTitle"></div>
        <div class="cutscene-subtitle" id="cutsceneSubtitle"></div>
        <div class="cutscene-theater" id="cutsceneTheater"></div>
    </div>
    <div class="cutscene-briefing" id="cutsceneBriefing"></div>
    <div class="cutscene-skip" id="cutsceneSkip">PRESS SPACE TO SKIP</div>
</div>

<!-- Game Over -->
<div id="gameOver">
    <h1>KILLED IN ACTION</h1>
    <div class="stats">Score: <span id="finalScore">0</span></div>
    <div class="stats2">Wave <span id="finalWave">1</span> | Kills: <span id="finalKills">0</span></div>
    <button id="restartBtn">FIGHT AGAIN</button>
</div>

<div id="winScreen">
    <h1 id="winTitle">YOU WIN!</h1>
    <div id="campaignComplete" style="display:none;font-family:Impact,sans-serif;font-size:36px;color:#d4a017;text-shadow:3px 3px 0 #000;margin-bottom:10px;letter-spacing:4px;">CAMPAIGN COMPLETE  BERLIN HAS FALLEN!</div>
    <div class="stats">Score: <span id="winScore">0</span></div>
    <div class="stats2">Kills: <span id="winKills">0</span></div>
    <button id="nextMissionBtn" style="margin-bottom:12px">NEXT MISSION &gt;&gt;</button>
    <button id="lobbyBtn">BACK TO LOBBY</button>
</div>

<!-- Touch Controls (hidden on desktop) -->
<div id="touchControls">
    <div id="lookArea"></div>
    <div id="moveStick"><div id="moveStickKnob"></div></div>
    <div id="shootBtn">FIRE</div>
    <div id="adsBtn">ADS</div>
    <div id="reloadBtn">RLD</div>
    <div id="jumpBtn">JMP</div>
    <div id="sprintBtn">RUN</div>
    <div id="grenadeBtn">GRN</div>
    <div id="weaponBtns">
        <div class="weapon-btn" data-idx="0">1</div>
        <div class="weapon-btn" data-idx="1">2</div>
        <div class="weapon-btn" data-idx="2">3</div>
        <div class="weapon-btn" data-idx="3">4</div>
        <div class="weapon-btn" data-idx="4">5</div>
    </div>
</div>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="/socket.io/socket.io.js" onerror="window.io=function(){throw new Error('No server')}"></script>
<script src="game.js"></script>
</body>
</html>
